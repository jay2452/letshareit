<% provide(:title, "Profile - #{@user.name}") %>
<div class="profile_page">
	<br>
	<div class="container">
		<%# @user defined in profile controller  %>
		<div>
			<div class="col-md-4">
				<div class="panel panel-default image-container">
					<div class="panel-body" align="center">
						<%= gravatar_for_large @user %><br><br>
						<b><%= @user.name %> </b><br>
						<%= @user.branch.name %> <br>
						<%= @user.email %> <br>
						<p align="center">
							<%= @user.about_me %>
						</p>
					</div>
				</div>

				<div>
					<div class="well">
						<h4>Links by me : </h4>
						<% @links.each do |link| %>
							<%= link_to link[:topic], url_with_protocol(link[:url]), target: "_blank" %> &nbsp;&nbsp;&nbsp;
							<small><%= link_to 'delete', link, method: :delete, data: { confirm: 'Are you sure?' } %></small><br>
						<% end -%>
					</div>
				</div>
			</div>
			
			<div class="col-md-8">
				<div class="panel panel-default preference-container">
					<div class="panel-body">
						<h4>Your preferences : <h4><br>
						<% if current_user.user_preferences.any? %>
							<% current_user.user_preferences.each do |uf| %>
								<%= link_to uf.subject.name, subject_path(uf.subject_id) %>
								<%= link_to 'Edit', edit_user_preference_path(uf) %>
								<%= link_to 'Destroy', uf, method: :delete, data: { confirm: 'Are you sure?' } %>
								<br><br>
							<% end -%>
							<%= link_to 'Add Subject', new_user_preference_path %>
						<% else %>
							<%= link_to 'Choose your preferred subject to see its recent uploads', new_user_preference_path %>
						<% end -%>
					</div>
				</div>

				<div class="well">
					<h4>Uploads by me : </h4>
					<% @uploads.each do |upload| %>
						<%= link_to upload.topic, upload.file.url, target: "_blank" %> &nbsp;&nbsp;&nbsp;
						<small><%= link_to 'delete', upload, method: :delete, data: { confirm: 'Are you sure?' } %></small><br>
					<% end -%>
				</div>
			</div>
		</div>	
	</div>
</div>